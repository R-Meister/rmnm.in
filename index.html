<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Perfect Eyes Menu</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>

<style>
body {
  margin: 0;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  background: #e8e8e8;
  font-family: sans-serif;
}

/* ===== CONTAINER ===== */
.menu {
  background: #2b2b2b;
  border-radius: 999px;
  height: 80px;
  width: 170px; /* compact idle width */
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
  cursor: pointer;
}

/* ===== EYES GROUP ===== */
.eyes {
  display: flex;
  gap: 6px; /* tight spacing */
  position: relative;
  z-index: 2;
}

.eye {
  width: 48px;
  height: 48px;
  background: white;
  border-radius: 50%;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}

.pupil {
  width: 18px;
  height: 18px;
  background: black;
  border-radius: 50%;
  position: relative;
  z-index: 3;
}

.eyelid {
  position: absolute;
  top: 0;
  width: 100%;
  height: 0%;
  background: #2b2b2b;
  border-radius: 50%;
  z-index: 4;
}

/* ===== NAV (ABSOLUTE SO NO SPACE) ===== */
.nav {
  position: absolute;
  display: flex;
  gap: 40px;
  opacity: 0;
  pointer-events: none;
}

.nav a {
  color: white;
  text-decoration: none;
  font-size: 18px;
  transform: translateY(10px);
}
</style>
</head>

<body>

<div class="menu" id="menu">

  <div class="eyes">
    <div class="eye">
      <div class="eyelid"></div>
      <div class="pupil"></div>
    </div>
    <div class="eye">
      <div class="eyelid"></div>
      <div class="pupil"></div>
    </div>
  </div>

  <nav class="nav" id="nav">
    <a href="#">Projects</a>
    <a href="#">About</a>
    <a href="#">Process</a>
    <a href="#">Contact</a>
  </nav>

</div>

<script>
const menu = document.getElementById("menu");
const nav = document.getElementById("nav");
const navLinks = document.querySelectorAll(".nav a");
const pupils = document.querySelectorAll(".pupil");
const eyes = document.querySelectorAll(".eye");
const eyelids = document.querySelectorAll(".eyelid");

/* ==============================
   EXPANSION TIMELINE
============================== */
const expandTL = gsap.timeline({ paused: true });

expandTL
.to(menu, {
  width: 700,
  duration: 0.9,
  ease: "elastic.out(1,0.6)"
})
.to(".eyes", {
  gap: 500,
  duration: 0.8,
  ease: "elastic.out(1,0.6)"
}, 0)
.to(nav, { opacity: 1, duration: 0.2 }, 0.3)
.to(navLinks, {
  y: 0,
  opacity: 1,
  stagger: 0.05,
  duration: 0.4,
  ease: "power3.out"
}, 0.3);


/* Faster Smooth Collapse */
function collapse() {
  gsap.to(menu, {
    width: 170,
    duration: 0.35,
    ease: "power3.out"
  });

  gsap.to(".eyes", {
    gap: 6,
    duration: 0.35,
    ease: "power3.out"
  });

  gsap.to(nav, {
    opacity: 0,
    duration: 0.15
  });

  gsap.to(navLinks, {
    y: 10,
    opacity: 0,
    duration: 0.2
  });
}

menu.addEventListener("mouseenter", () => expandTL.play());
menu.addEventListener("mouseleave", () => collapse());

/* ==============================
   CURSOR TRACKING
============================== */
document.addEventListener("mousemove", (e) => {
  eyes.forEach((eye, i) => {
    const rect = eye.getBoundingClientRect();
    const centerX = rect.left + rect.width/2;
    const centerY = rect.top + rect.height/2;
    const angle = Math.atan2(e.clientY - centerY, e.clientX - centerX);
    const max = 10;

    gsap.to(pupils[i], {
      x: Math.cos(angle) * max,
      y: Math.sin(angle) * max,
      duration: 0.25,
      ease: "power2.out"
    });
  });
});

/* ==============================
   BLINK SYSTEM
============================== */
function blink() {
  eyelids.forEach((lid, i) => {
    gsap.to(lid, {
      height: "100%",
      duration: 0.12,
      yoyo: true,
      repeat: 1,
      delay: i * 0.05
    });
  });
}

function randomBlink() {
  blink();
  gsap.delayedCall(gsap.utils.random(2,5), randomBlink);
}
randomBlink();

/* ==============================
   MICRO IDLE
============================== */
gsap.to(pupils, {
  x: "+=2",
  yoyo: true,
  repeat: -1,
  duration: 2,
  ease: "sine.inOut"
});
</script>

</body>
</html>
